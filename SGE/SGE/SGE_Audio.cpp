//====================================================================================================
// Filename:	SGE_Audio.cpp
//====================================================================================================

//====================================================================================================
// Includes
//====================================================================================================

#include "SGE_Audio.h"

#include "Audio/AudioSystem.h"
#include "Misc/Misc.h"
#include "Resource/ResourceSystem.h"

//====================================================================================================
// Namespace
//====================================================================================================

namespace SGE
{

//====================================================================================================
// Class Definitions
//====================================================================================================

SGE_Sound::SGE_Sound()
	: mpSound(nullptr)
{
	// Empty
}

//----------------------------------------------------------------------------------------------------

SGE_Sound::~SGE_Sound()
{
	// Empty
}

//----------------------------------------------------------------------------------------------------

void SGE_Sound::Load(const char* pSoundName)
{
	// Unload everything first
	Unload();

	// Construct the full name
	std::string fullname;
	fullname += IniFile::Get()->GetString("SoundPath", "../Data/Sounds/");
	fullname += pSoundName;

	// Load the sound
	mpSound = ResourceManager::Get()->Create<Sound>(fullname.c_str());
}

//----------------------------------------------------------------------------------------------------

void SGE_Sound::Unload()
{
	// Unload sound
	if (nullptr != mpSound)
	{
		ResourceManager::Get()->Destroy(mpSound);
		mpSound = nullptr;
	}
}

//----------------------------------------------------------------------------------------------------

void SGE_Sound::Play(bool bLoop)
{
	if (nullptr != mpSound)
	{
		mpSound->Play(bLoop);
	}
}

//----------------------------------------------------------------------------------------------------

void SGE_Sound::Stop()
{
	if (nullptr != mpSound)
	{
		mpSound->Stop();
	}
}

} // namespace SGE